<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>the space beyond 1 & 0 - collective poem</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #0e0956;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: #f7f5f6;
            position: relative;
            overflow-x: hidden;
        }

        /* Floating pixel diamonds background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(217, 57, 65, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(247, 245, 246, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(217, 57, 65, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .floating-pixels {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            overflow: hidden;
            pointer-events: none;
            z-index: 0;
        }

        .pixel {
            position: absolute;
            width: 20px;
            height: 20px;
            transform: rotate(45deg);
            opacity: 0.1;
            animation: float 20s infinite linear;
        }

        @keyframes float {
            from {
                transform: translateY(100vh) rotate(45deg);
            }
            to {
                transform: translateY(-100px) rotate(45deg);
            }
        }

        .container {
            max-width: 700px;
            width: 100%;
            margin: 12px auto;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        h1 {
            font-size: 2.5em;
            font-weight: 800;
            margin-bottom: 10px;
            letter-spacing: -1px;
            background: linear-gradient(135deg, #f7f5f6 0%, #d93941 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-transform: lowercase;
        }

        .subtitle {
            color: #d93941;
            font-size: 0.9em;
            letter-spacing: 2px;
            margin-bottom: 15px;
            text-transform: uppercase;
        }

        /* Artist Statement Button - Right under subtitle */
        .toggle-statement {
            background: transparent;
            border: 1px solid rgba(247, 245, 246, 0.2);
            color: rgba(247, 245, 246, 0.6);
            padding: 8px 16px;
            font-size: 0.8em;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 0.5px;
            text-transform: none;
            font-weight: 400;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            margin-bottom: 8px;
        }

        .toggle-statement:hover {
            border-color: #d93941;
            color: #f7f5f6;
            background: rgba(217, 57, 65, 0.1);
        }

        .toggle-statement .arrow {
            transition: transform 0.3s ease;
            display: inline-block;
            font-size: 0.8em;
        }

        .toggle-statement.open .arrow {
            transform: rotate(180deg);
        }

        .artist-statement {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
            background: rgba(247, 245, 246, 0.03);
            margin-bottom: 15px;
            text-align: justified;
        }

        .artist-statement.open {
            max-height: 1000px;
            padding: 30px;
        }

        .artist-statement h3 {
            color: #d93941;
            font-size: 1.1em;
            margin-bottom: 8px;
            letter-spacing: 1px;
            font-weight: 600;
            text-align: center;
        }

        .artist-name {
            color: #f7f5f6;
            font-weight: 600;
            text-align: center;
            margin-bottom: 15px;
            font-size: 0.90em;
            letter-spacing: 1px;
        }

        .artist-statement p {
            color: rgba(247, 245, 246, 0.8);
            line-height: 1.8;
            margin-bottom: 15px;
            font-size: 0.9em;
        }

        .artist-statement em {
            color: #f7f5f6;
            font-style: italic;
        }

        .statement-note {
            margin-top: 25px;
            padding-top: 20px;
            color: #d93941 !important;
            text-align: center !important;
            font-style: italic;
        }

        /* Question - Made bolder */
        .question {
            font-size: 1.7em;
            margin-bottom: 12px;
            font-weight: 700;
            line-height: 1.0;
            color: #f7f5f6;
            letter-spacing: -0.5px;
        }

        .instructions {
            margin-bottom: 10px;
            line-height: 1.8;
            color: rgba(247, 245, 246, 0.7);
            font-size: 0.95em;
            font-weight: 300;
        }

        .instructions p {
            margin: 5px 0;
        }

        .input-area {
            margin: 40px 0;
        }

        input[type="text"] {
            width: 100%;
            padding: 15px 20px;
            font-size: 1.1em;
            border: 2px solid rgba(247, 245, 246, 0.2);
            border-radius: 0;
            background: rgba(247, 245, 246, 0.05);
            color: #f7f5f6;
            font-family: inherit;
            text-align: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #d93941;
            background: rgba(247, 245, 246, 0.1);
            box-shadow: 0 0 20px rgba(217, 57, 65, 0.2);
        }

        input[type="text"]::placeholder {
            color: rgba(247, 245, 246, 0.3);
        }

        button.submit-btn {
            margin-top: 20px;
            padding: 14px 50px;
            font-size: 1em;
            background: #d93941;
            color: #f7f5f6;
            border: none;
            cursor: pointer;
            font-family: inherit;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            font-weight: 600;
        }

        button.submit-btn:hover {
            background: #f7f5f6;
            color: #0e0956;
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(217, 57, 65, 0.3);
        }

        button.submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .counter {
            margin-top: 30px;
            color: rgba(247, 245, 246, 0.6);
            font-size: 0.9em;
            letter-spacing: 1px;
        }

        .counter span {
            color: #d93941;
            font-weight: 600;
        }

        .sync-status {
            margin-top: 10px;
            font-size: 0.8em;
            color: rgba(247, 245, 246, 0.4);
            font-style: italic;
        }

        .sync-status.loading {
            color: #d93941;
        }

        .words-container {
            margin-top: 20px;
            padding-top: 10px;
        }

        .words-title {
            font-size: 0.9em;
            color: rgba(247, 245, 246, 0.5);
            margin-bottom: 30px;
            font-style: italic;
            letter-spacing: 1px;
        }

        .words-display {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            min-height: 70px;
            padding: 10px;
        }

        .word {
            padding: 10px 10px;
            background: rgba(247, 245, 246, 0.05);
            color: #f7f5f6;
            font-size: 0.90em;
            animation: fadeIn 1s ease;
            border: 1px solid rgba(247, 245, 246, 0.1);
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .word.new {
            background: rgba(217, 57, 65, 0.2);
            border-color: #d93941;
        }

        .word:hover {
            background: rgba(217, 57, 65, 0.2);
            border-color: #d93941;
            transform: scale(1.05);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .confirmation {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #d93941;
            color: #f7f5f6;
            padding: 30px 50px;
            box-shadow: 0 10px 40px rgba(217, 57, 65, 0.3);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
            z-index: 1000;
            font-weight: 600;
            letter-spacing: 1px;
        }

        .confirmation.show {
            opacity: 1;
        }

        .info {
            position: fixed;
            bottom: 20px;
            right: 20px;
            font-size: 0.75em;
            color: rgba(247, 245, 246, 0.4);
            text-align: right;
            line-height: 1.5;
            letter-spacing: 0.5px;
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 1.8em;
            }
            
            .question {
                font-size: 1.3em;
            }
            
            .instructions {
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <div class="floating-pixels" id="pixelContainer"></div>
    
    <div class="container">
        <h1>the space beyond 1 & 0</h1>
        <div class="subtitle">Collective Digital Poem</div>
        
        <!-- Artist Statement Button RIGHT UNDER Subtitle -->
        <button class="toggle-statement" onclick="toggleStatement()" id="statementToggle">
            artist statement <span class="arrow">▼</span>
        </button>
        
        <!-- Artist Statement (Hidden by default) -->
        <div class="artist-statement" id="artistStatement">
            <div class="artist-name">Bin Youn</div>
            <p>This work is inspired by the East Asian tradition of scholars gathering in nature to compose and exchange poetry, a practice known as <em>Pungryu</em> (풍류) in Korea. The word itself reveals its essence: <em>Pung</em> (풍/風) means wind, and <em>Ryu</em> (류/流) means flow—together suggesting the way art and life should move like wind and water, naturally and without force.</p>
            
            <p>These <em>Seonbi(선비)</em> (scholar-artists) believed that true culture arose through spontaneous exchange, where one person's verse would inspire another's response, flowing from voice to voice like wind through leaves, creating layers of meaning that no single voice could achieve.</p>
            
            <p>Within diverse RMIT community, I transpose this analog tradition into our digital age. Just as <em>Pungryu</em> scholars found infinite expression within nature's patterns, the space beyond 1 and 0 contains everything that makes us flow.</p>
            
            <p>This digital gathering invites our community to contribute fragments throughout the exhibition period. Each submission becomes part of a larger consciousness, creating the same spontaneous harmony that <em>Pungryu</em> sought centuries ago.</p>
            
            <p class="statement-note">The final collective poem will be compiled and released after the exhibition closes on September 18, 2025.</p>
        </div>
        
        <!-- Main Question - BOLD -->
        <div class="question">
            "beyond 1 & 0 - what do you find?"
        </div>
        
        <div class="instructions">
            <p>ㅇ is enough</p>
            <p>ẵ light-color ẵ wave-form ẵ thing-some</p>
            <p>what you  - now</p>
            <p>what you remember</p>
            <p>what you - coming</p>
            <p style="margin-top: 15px;">Pick th-in-gs around</p>
            <p>from you</p>
            <p>from yesterday</p>
            <p>from tomorrow</p>
            <p style="margin-top: 15px; font-style: italic;">whatever comes in/out </p>
            <p style="font-style: italic;">any ㅁother-tongue</p>
        </div>
        
        <div class="input-area">
            <input type="text" id="wordInput" placeholder=".t.y.p.e.h.e.r.e." maxlength="50">
            <button class="submit-btn" id="submitBtn" onclick="submitWord()">let it leave to poem</button>
        </div>
        
        <div class="counter">
            <span id="count">0</span> voices gathered
        </div>
        <div class="sync-status" id="syncStatus"></div>
        
        <div class="words-container">
            <div class="words-title">leaves becoming our flow-poem...</div>
            <div class="words-display" id="wordsDisplay"></div>
        </div>
    </div>
    
    <div class="confirmation" id="confirmation">
        your word drifts into the space
    </div>
    
    <div class="info">
        beyond 1&0 Exhibition<br>
        13-18 Sep 2025<br>
        10 Years Digital Media<br>
        RMIT University<br>
    </div>

    <script>
        // ============================================
        // GOOGLE SHEETS CSV URL - CONFIGURED FOR YOUR EXHIBITION
        // ============================================
        
        // This is your actual Google Sheet CSV export with the correct sheet ID (gid)
        const SHEET_CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSsTBMdx2sNFs59QDRfsF6XD-hyBRaOA-0nQDSc2TmExnlpjIplW_hTf_cY1hzSNgf1myu9_-jvnrdr/pub?gid=951027196&single=true&output=csv';
        
        // ============================================
        // Google Form Configuration (keep your existing)
        // ============================================
        const GOOGLE_FORM_ID = '1FAIpQLSc0N3f_H1vq-Xo19-UZpM_Ca_0WnGKH0QVYgdfUFbEmHenbvw';
        const GOOGLE_FORM_ENTRY_ID = 'entry.879607282';
        
        // Global variables
        let allWords = []; // All words from the collective
        let localSubmittedWords = new Set(); // Track words this user submitted
        const MAX_DISPLAY = 50; // Show more words
        let isSubmitting = false;
        
        // Create floating pixels
        function createPixels() {
            const container = document.getElementById('pixelContainer');
            const colors = ['#d93941', '#f7f5f6', 'rgba(217, 57, 65, 0.3)', 'rgba(247, 245, 246, 0.2)'];
            
            for (let i = 0; i < 15; i++) {
                const pixel = document.createElement('div');
                pixel.className = 'pixel';
                pixel.style.left = Math.random() * 100 + '%';
                pixel.style.animationDelay = Math.random() * 20 + 's';
                pixel.style.animationDuration = (20 + Math.random() * 10) + 's';
                pixel.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                container.appendChild(pixel);
            }
        }
        
        // Load words from Google Sheets
        async function loadWordsFromSheet() {
            const statusEl = document.getElementById('syncStatus');
            statusEl.textContent = 'loading collective voices...';
            statusEl.classList.add('loading');
            
            // Skip if URL not configured
            if (SHEET_CSV_URL.includes('YOUR_SHEET_ID')) {
                console.warn('Please configure your Google Sheets CSV URL');
                statusEl.textContent = 'configure sheet URL to see collective poems';
                return;
            }
            
            try {
                const response = await fetch(SHEET_CSV_URL);
                if (!response.ok) throw new Error('Failed to fetch');
                
                const text = await response.text();
                const lines = text.split('\n');
                
                // Parse CSV - assuming first column contains words
                // Skip header row if it exists
                const words = [];
                lines.forEach((line, index) => {
                    // Skip header if first line contains "Timestamp" or similar
                    if (index === 0 && line.toLowerCase().includes('timestamp')) return;
                    
                    // Parse CSV line (handle commas in quotes if needed)
                    const match = line.match(/[^,]*"[^"]*"[^,]*|[^,]+/g);
                    if (match && match.length > 0) {
                        // Get the word (assuming it's in the second column after timestamp)
                        const word = match[1] || match[0];
                        if (word && word.trim()) {
                            words.push(word.replace(/"/g, '').trim());
                        }
                    }
                });
                
                allWords = words;
                displayWords();
                updateCounter();
                
                statusEl.textContent = `connected to collective flow`;
                setTimeout(() => {
                    statusEl.textContent = '';
                    statusEl.classList.remove('loading');
                }, 3000);
                
            } catch (error) {
                console.error('Error loading words:', error);
                statusEl.textContent = 'flowing offline - words still being collected';
                statusEl.classList.remove('loading');
                
                // Load from localStorage as fallback
                const localWords = JSON.parse(localStorage.getItem('localSubmissions')) || [];
                allWords = localWords;
                displayWords();
                updateCounter();
            }
        }
        
        // Display words
        function displayWords() {
            const display = document.getElementById('wordsDisplay');
            display.innerHTML = '';
            
            // Show recent words (last MAX_DISPLAY)
            const wordsToShow = allWords.slice(-MAX_DISPLAY);
            
            wordsToShow.forEach(word => {
                const wordElement = document.createElement('span');
                wordElement.className = 'word';
                
                // Highlight if this user submitted it
                if (localSubmittedWords.has(word)) {
                    wordElement.classList.add('new');
                }
                
                wordElement.textContent = word;
                display.appendChild(wordElement);
            });
        }
        
        // Submit word
        async function submitWord() {
            if (isSubmitting) return;
            
            const input = document.getElementById('wordInput');
            const word = input.value.trim();
            const submitBtn = document.getElementById('submitBtn');
            
            if (!word) return;
            
            isSubmitting = true;
            submitBtn.disabled = true;
            submitBtn.textContent = 'flowing...';
            
            // Add to local tracking
            localSubmittedWords.add(word);
            
            // Save locally first (immediate feedback)
            const localSubmissions = JSON.parse(localStorage.getItem('localSubmissions')) || [];
            localSubmissions.push(word);
            localStorage.setItem('localSubmissions', JSON.stringify(localSubmissions));
            
            // Add to display immediately
            allWords.push(word);
            displayWords();
            updateCounter();
            
            // Send to Google Sheets
            try {
                await sendToGoogleSheets(word);
                showConfirmation();
            } catch (error) {
                console.error('Error submitting:', error);
                // Still show confirmation - word is saved locally
                showConfirmation();
            }
            
            // Clear input and reset button
            input.value = '';
            setTimeout(() => {
                isSubmitting = false;
                submitBtn.disabled = false;
                submitBtn.textContent = 'let it leave to poem';
            }, 1000);
            
            // Reload words after a delay to get updates
            setTimeout(() => {
                loadWordsFromSheet();
            }, 3000);
        }
        
        // Send to Google Sheets via Form
        function sendToGoogleSheets(word) {
            const formUrl = `https://docs.google.com/forms/d/e/${GOOGLE_FORM_ID}/formResponse`;
            const formData = new FormData();
            formData.append(GOOGLE_FORM_ENTRY_ID, word);
            
            return fetch(formUrl, {
                method: 'POST',
                mode: 'no-cors',
                body: formData
            });
        }
        
        // Update counter
        function updateCounter() {
            document.getElementById('count').textContent = allWords.length;
        }
        
        // Show confirmation
        function showConfirmation() {
            const conf = document.getElementById('confirmation');
            conf.classList.add('show');
            setTimeout(() => {
                conf.classList.remove('show');
            }, 2000);
        }
        
        // Toggle artist statement
        function toggleStatement() {
            const statement = document.getElementById('artistStatement');
            const toggle = document.getElementById('statementToggle');
            
            if (statement.classList.contains('open')) {
                statement.classList.remove('open');
                toggle.classList.remove('open');
            } else {
                statement.classList.add('open');
                toggle.classList.add('open');
            }
        }
        
        // Auto-refresh words every 30 seconds
        function startAutoRefresh() {
            setInterval(() => {
                loadWordsFromSheet();
            }, 30000); // Refresh every 30 seconds
        }
        
        // Initialize on load
        window.onload = function() {
            createPixels();
            
            // Load any local submissions first
            const localSubmissions = JSON.parse(localStorage.getItem('localSubmissions')) || [];
            localSubmissions.forEach(word => localSubmittedWords.add(word));
            
            // Load words from sheet
            loadWordsFromSheet();
            
            // Start auto-refresh
            startAutoRefresh();
            
            // Allow Enter key to submit
            document.getElementById('wordInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    submitWord();
                }
            });
        }
        
        // Export function (for debugging/backup)
        window.exportLocalPoems = function() {
            const localSubmissions = JSON.parse(localStorage.getItem('localSubmissions')) || [];
            const dataStr = JSON.stringify(localSubmissions, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `local-poems-${new Date().toISOString()}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }
    </script>
</body>
</html>
